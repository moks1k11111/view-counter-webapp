# Email Farm - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Render

## üöÄ –®–∞–≥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Email Farm –Ω–∞ Render

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–∞—Ä–æ–ª–µ–π:

```bash
python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
```

–°–∫–æ–ø–∏—Ä—É–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abc123XYZ...==`)

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render

–ó–∞–π–¥–∏ –≤ Render Dashboard ‚Üí –¢–≤–æ–π —Å–µ—Ä–≤–∏—Å ‚Üí Environment

–î–æ–±–∞–≤—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

#### **DB_ENCRYPTION_KEY** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
```
DB_ENCRYPTION_KEY=—Ç–≤–æ–π_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á_–∑–¥–µ—Å—å
```

#### **LOG_CHANNEL_ID** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å –∞–ª–µ—Ä—Ç—ã –æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å—å–º–∞—Ö:
```
LOG_CHANNEL_ID=-1001234567890
```

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å ID –∫–∞–Ω–∞–ª–∞:
1. –°–æ–∑–¥–∞–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π Telegram –∫–∞–Ω–∞–ª
2. –î–æ–±–∞–≤—å —Ç—É–¥–∞ –±–æ—Ç–∞ @userinfobot
3. –ù–∞–ø–∏—à–∏ —á—Ç–æ-—Ç–æ –≤ –∫–∞–Ω–∞–ª
4. –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç Chat ID

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ persistent disk

–í `render.yaml` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏—Å–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è SQLite –±–∞–∑—ã:
```yaml
disk:
  name: view-counter-data
  mountPath: /opt/render/project/src/webapp/backend
  sizeGB: 1
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–∞ Render Free plan persistent disk –ø–ª–∞—Ç–Ω—ã–π (~$1/–º–µ—Å—è—Ü)

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL (—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ)

### 4. –î–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
git add .
git commit -m "Add Email Farm module"
git push origin main
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
```
‚úÖ Email Farm system initialized
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É –ø—Ä–æ `DB_ENCRYPTION_KEY` - –∑–Ω–∞—á–∏—Ç –Ω–µ –¥–æ–±–∞–≤–∏–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.

## üì¶ –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ –≤ requirements.txt)

- `cryptography>=41.0.0` - Fernet —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- `aioimaplib>=1.0.1` - Async IMAP –∫–ª–∏–µ–Ω—Ç
- `python-socks[asyncio]>=2.4.3` - SOCKS5 –ø—Ä–æ–∫—Å–∏

## üì° API Endpoints

### Admin endpoints (—Ç—Ä–µ–±—É—é—Ç ADMIN_IDS):
- `POST /api/admin/emails/upload` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–¥–Ω—É –ø–æ—á—Ç—É
- `POST /api/admin/emails/bulk_upload` - –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- `POST /api/admin/emails/set_limit` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `GET /api/admin/emails/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–µ—Ä–º—ã

### User endpoints:
- `GET /api/emails/my_list` - –ú–æ–∏ –ø–æ—á—Ç—ã
- `POST /api/emails/allocate` - –í–∑—è—Ç—å —Å–≤–æ–±–æ–¥–Ω—É—é –ø–æ—á—Ç—É
- `POST /api/emails/{email_id}/check_code` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥
- `POST /api/emails/{email_id}/mark_banned` - –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∑–∞–±–∞–Ω–µ–Ω–Ω—É—é

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–∞—Ä–æ–ª–∏ —à–∏—Ñ—Ä—É—é—Ç—Å—è AES-128 (Fernet)
- ‚úÖ –ê–Ω—Ç–∏-–∫—Ä–∞–∂–∞ —Ñ–∏–ª—å—Ç—Ä (–±–ª—ç–∫–ª–∏—Å—Ç 30+ —Ñ—Ä–∞–∑ EN/RU/UA)
- ‚úÖ Telegram –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å—å–º–∞—Ö
- ‚úÖ –ê—É–¥–∏—Ç –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ –±–∞–∑–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

Email Farm –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ SQLite –±–∞–∑—É `tiktok_analytics.db`:

–¢–∞–±–ª–∏—Ü—ã:
- `email_accounts` - –ê–∫–∫–∞—É–Ω—Ç—ã (email, encrypted_password, proxy, status)
- `user_limits` - –õ–∏–º–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `email_history` - –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —á–µ—Ä–µ–∑ Postman –∏–ª–∏ curl:

1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—á—Ç—É (admin)**:
```bash
curl -X POST https://your-render-app.onrender.com/api/admin/emails/upload \
  -H "x-telegram-init-data: ..." \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@outlook.com",
    "password": "password123",
    "proxy": "socks5://user:pass@ip:port"
  }'
```

2. **–í–∑—è—Ç—å –ø–æ—á—Ç—É (user)**:
```bash
curl -X POST https://your-render-app.onrender.com/api/emails/allocate \
  -H "x-telegram-init-data: ..."
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ (user)**:
```bash
curl -X POST https://your-render-app.onrender.com/api/emails/1/check_code \
  -H "x-telegram-init-data: ..."
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **DB_ENCRYPTION_KEY –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—á—Ç - —Å—Ç–∞—Ä—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä—É—é—Ç—Å—è
2. **–ü—Ä–æ–∫—Å–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–±–æ—á–∏–º–∏** - –∏–Ω–∞—á–µ IMAP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞—Å—Ç—Å—è
3. **LOG_CHANNEL_ID** - —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–∞–Ω–∞–ª—ã, –Ω–µ –≥—Ä—É–ø–ø—ã
4. **Persistent disk** –Ω—É–∂–µ–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–∑—ã –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

## üÜò Troubleshooting

**–û—à–∏–±–∫–∞:** `DB_ENCRYPTION_KEY not found`
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render

**–û—à–∏–±–∫–∞:** `Failed to connect to email`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–∫—Å–∏ –∏ –∫—Ä–µ–¥—ã Outlook

**–û—à–∏–±–∫–∞:** `Email Farm not initialized`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏, –≤–æ–∑–º–æ–∂–Ω–æ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫

---

‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ! –í—Å–µ –º–æ–¥—É–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ.
