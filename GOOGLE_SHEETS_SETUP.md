# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets –Ω–∞ Render

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ Render –ø–æ—á—Ç—ã –∏—Å—á–µ–∑–∞—é—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω–∞—è.

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ –ø–æ—á—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ Google Sheets (—Ç–∞–±–ª–∏—Ü–∞ PostBD) —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–¥–º–∏–Ω–æ–º.

## –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

‚úÖ –ö–æ–¥ —É–∂–µ –≥–æ—Ç–æ–≤:
- –ü—Ä–∏ bulk upload –ø–æ—á—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Google Sheets
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—á—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Google Sheets –æ–±—Ä–∞—Ç–Ω–æ –≤ SQLite
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Google Sheets

‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Google Sheets Manager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ credentials –Ω–∞ Render

## –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ Render

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å credentials –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

1. –í–æ–∑—å–º–∏ —Å–≤–æ–π —Ñ–∞–π–ª `service_account.json` (Google Service Account credentials)

2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–π –µ–≥–æ –≤ base64 –ë–ï–ó –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫:

**–ù–∞ macOS/Linux:**
```bash
base64 -w 0 service_account.json
```

**–ù–∞ Windows (PowerShell):**
```powershell
[Convert]::ToBase64String([IO.File]::ReadAllBytes("service_account.json"))
```

3. –°–∫–æ–ø–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤)

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å environment variable –Ω–∞ Render

1. –ó–∞–π–¥–∏ –≤ **Render Dashboard** ‚Üí —Ç–≤–æ–π —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏ –≤ **Environment**
3. –ù–∞–π–¥–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GOOGLE_SHEETS_CREDENTIALS_JSON` (–∏–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—É—é)
4. –í—Å—Ç–∞–≤—å base64 —Å—Ç—Ä–æ–∫—É –∏–∑ –®–∞–≥–∞ 1
5. **–í–ê–ñ–ù–û:** –£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤, –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫, –∫–∞–≤—ã—á–µ–∫!
6. –ù–∞–∂–º–∏ **Save Changes**

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–£–±–µ–¥–∏—Å—å —á—Ç–æ –µ—Å—Ç—å —ç—Ç–∏ environment variables –Ω–∞ Render:

```
GOOGLE_SHEETS_CREDENTIALS_JSON = <—Ç–≤–æ—è base64 —Å—Ç—Ä–æ–∫–∞>
EMAIL_FARM_SECRET_KEY = <–ª—é–±–æ–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è>
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

1. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è environment variables
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ (Logs tab)
3. –ò—â–∏ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:

**–£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```
‚úÖ Email Sheets Manager (PostBD) initialized successfully
   Spreadsheet: PostBD
```

**–û—à–∏–±–∫–∞:**
```
‚ùå Failed to initialize Email Sheets Manager: ...
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ Render, –º–æ–∂–µ—à—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
cd webapp/backend
python test_credentials.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
- –ï—Å—Ç—å –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –ª–∏ base64
- –ü–∞—Ä—Å–∏—Ç—Å—è –ª–∏ JSON
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ª–∏ –∫ Google Sheets

### –¢–µ—Å—Ç –Ω–∞ Render

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**
```
üìä Initializing Email Sheets Manager:
   credentials_file=service_account.json
   has_json_creds=True
   json_creds_length=1234
   json_creds_preview=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
‚úÖ Email Sheets Manager (PostBD) initialized successfully
   Spreadsheet: PostBD
```

2. **–ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:**
```
üì• Syncing emails from Google Sheets to SQLite...
   Found 15 emails in Google Sheets
   ‚úÖ Synced: test1@outlook.com (free)
   ‚úÖ Synced: test2@outlook.com (user: 123456, completed: True)
‚úÖ Email sync complete: 15 synced, 0 skipped
```

3. **–ó–∞–≥—Ä—É–∑–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ—á—Ç—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**

4. **–ü—Ä–æ–≤–µ—Ä—å Google Sheets:**
   - –û—Ç–∫—Ä–æ–π —Ç–∞–±–ª–∏—Ü—É PostBD
   - –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –ª–∏—Å—Ç "Post"
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å –ø–æ—á—Ç–∞–º–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ "free"

5. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ Render (—Ä—É—á–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)**
   - Manual Deploy ‚Üí Clear build cache & deploy

6. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ—á—Ç—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã PostBD (–ª–∏—Å—Ç "Post")

–ö–æ–ª–æ–Ω–∫–∏:
- **A: Email** - –∞–¥—Ä–µ—Å –ø–æ—á—Ç—ã
- **B: Status** - —Å—Ç–∞—Ç—É—Å (free, active, banned)
- **C: User ID** - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **D: Username** - Telegram username
- **E: Allocated At** - –∫–æ–≥–¥–∞ –≤–∑—è—Ç–∞
- **F: Last Checked** - –ø–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
- **G: Ban Reason** - –ø—Ä–∏—á–∏–Ω–∞ –±–∞–Ω–∞
- **H: Total Checks** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **I: Has Proxy** - –µ—Å—Ç—å –ª–∏ –ø—Ä–æ–∫—Å–∏
- **J: Codes History** - –∏—Å—Ç–æ—Ä–∏—è –∫–æ–¥–æ–≤: "123456 (2025-12-11 10:30:00), 789012 (2025-12-11 11:45:00)"
- **K: Is Completed** - –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (0 –∏–ª–∏ 1)
- **L: Notes** - –∑–∞–º–µ—Ç–∫–∏

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å

### –ü—Ä–∏ bulk upload (admin –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ—á—Ç—ã):
```python
# –ê–¥–º–∏–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ—á—Ç—ã ‚Üí main.py:2905-2913
email_sheets.log_new_email(
    sheet_name="Post",
    email=account.email,
    has_proxy=bool(account.proxy)
)
# ‚úÖ –ü–æ—á—Ç–∞ —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Google Sheets —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "free"
```

### –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞:
```python
# main.py:215-282
await sync_emails_from_sheets()
# ‚úÖ –í—Å–µ –ø–æ—á—Ç—ã –∏–∑ Google Sheets –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ SQLite
```

### –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–¥–∞:
```python
# main.py:~2630
email_sheets.log_email_check(
    sheet_name="Post",
    email=email_account['email'],
    found_code=True,
    code="123456"
)
# ‚úÖ –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–ª–æ–Ω–∫—É "Codes History"
```

### –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```python
# main.py:~2970
email_sheets.update_email_completed_status(
    sheet_name="Post",
    email=email,
    is_completed=True
)
# ‚úÖ –°—Ç–∞—Ç—É—Å "Is Completed" –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ 1
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "Email Sheets Manager not initialized"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `GOOGLE_SHEETS_CREDENTIALS_JSON` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ Render
2. Base64 —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã (–ø—Ä–æ–±–µ–ª—ã, –ø–µ—Ä–µ–Ω–æ—Å—ã)
3. JSON –≤–Ω—É—Ç—Ä–∏ base64 –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
4. Service Account –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ PostBD

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ - —Ç–∞–º –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ base64 —Å—Ç—Ä–æ–∫–∞ —á–∏—Å—Ç–∞—è (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤/–ø–µ—Ä–µ–Ω–æ—Å–æ–≤)
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ Service Account email –¥–æ–±–∞–≤–ª–µ–Ω –≤ Google Sheets —Å –ø—Ä–∞–≤–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
4. –ó–∞–ø—É—Å—Ç–∏ `test_credentials.py` –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "Spreadsheet not found: PostBD"

**–†–µ—à–µ–Ω–∏–µ:**
1. –¢–∞–±–ª–∏—Ü–∞ PostBD –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –∫–æ–¥ —Å–æ–∑–¥–∞—Å—Ç –µ—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Google Drive

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—á—Ç—ã –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `get_email_by_address` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ email –≤ sheets –∏ SQLite —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—é—Ç (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –°–∫–æ–ø–∏—Ä—É–π –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ –∏–∑ Render
2. –ü—Ä–æ–≤–µ—Ä—å environment variables
3. –ó–∞–ø—É—Å—Ç–∏ diagnostic script
